<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0">
    <title>YT Downloader</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css" />
    
    <link rel="stylesheet" href="/static/style.css">

</head>
<body class="text-slate-100 min-h-screen relative overflow-x-hidden selection:bg-red-500 selection:text-white">

    <!-- Dynamic Background -->
    <div class="fixed inset-0 z-0">
        <!-- Default Abstract BG -->
        <div id="default-bg" class="absolute inset-0 bg-[radial-gradient(ellipse_at_top,_var(--tw-gradient-stops))] from-slate-900 via-[#0f172a] to-black">
            <div class="absolute top-[-10%] left-[-10%] w-[40%] h-[40%] bg-purple-600/20 rounded-full blur-[120px] animate-float"></div>
            <div class="absolute bottom-[-10%] right-[-10%] w-[40%] h-[40%] bg-red-600/20 rounded-full blur-[120px] animate-float" style="animation-delay: 2s;"></div>
        </div>
        <!-- Video Thumbnail Blurred BG -->
        <div id="video-bg" class="absolute inset-0 bg-cover bg-center opacity-0 transition-opacity duration-1000 scale-110 blur-2xl brightness-50"></div>
        <!-- Grid Pattern Overlay -->
        <div class="absolute inset-0 bg-[url('https://grainy-gradients.vercel.app/noise.svg')] opacity-20"></div>
    </div>

    <!-- Main Container -->
    <div class="relative z-10 w-full min-h-screen flex flex-col items-center p-4 md:p-6">
        
        <!-- Header / Search Area -->
        <div class="w-full max-w-4xl mt-2 md:mt-6 transition-all duration-700 ease-out" id="searchContainer">
            <div class="text-center mb-4">
                <h1 class="text-4xl md:text-6xl font-extrabold tracking-tight mb-2">
                    <span class="bg-gradient-to-r from-red-500 via-pink-500 to-purple-500 bg-clip-text text-transparent drop-shadow-lg">
                        StreamLine
                    </span>
                </h1>
                <p class="text-slate-400 text-base tracking-wide font-light">The Next-Gen YouTube Downloader</p>
            </div>

            <!-- Input Bar -->
            <div class="glass-panel rounded-2xl p-1.5 flex flex-col sm:flex-row gap-2 shadow-2xl glow-effect transition-all duration-300 transform hover:scale-[1.01]">
                <div class="flex-1 relative group">
                    <div class="absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none">
                        <i class="fas fa-link text-slate-500 group-focus-within:text-red-500 transition-colors"></i>
                    </div>
                    <input type="text" id="urlInput" placeholder="Paste YouTube Link here..." 
                        class="w-full bg-transparent border-none text-white text-base px-10 py-3 focus:ring-0 placeholder-slate-500/50 h-full rounded-xl">
                </div>
                <button onclick="fetchInfo()" id="fetchBtn"
                    class="bg-gradient-to-r from-red-600 to-pink-600 hover:from-red-500 hover:to-pink-500 text-white font-bold px-6 py-3 rounded-xl transition-all shadow-[0_0_20px_rgba(220,38,38,0.5)] hover:shadow-[0_0_30px_rgba(220,38,38,0.7)] flex items-center justify-center gap-2 whitespace-nowrap text-base">
                    <span>Fetch Video</span>
                    <i class="fas fa-arrow-right"></i>
                </button>
            </div>
        </div>

        <!-- Loading State -->
        <div id="loading" class="hidden mt-20 flex-col items-center">
            <div class="relative w-24 h-24">
                <div class="absolute inset-0 border-t-4 border-red-500 rounded-full animate-spin"></div>
                <div class="absolute inset-2 border-t-4 border-purple-500 rounded-full animate-spin" style="animation-duration: 1.5s;"></div>
                <div class="absolute inset-4 border-t-4 border-blue-500 rounded-full animate-spin" style="animation-duration: 2s;"></div>
            </div>
            <p class="mt-6 text-xl text-slate-300 font-light tracking-widest animate-pulse">ANALYZING STREAM...</p>
        </div>

        <!-- Result Dashboard (Full Width Cinematic) -->
        <div id="resultArea" class="hidden w-full max-w-6xl mt-6 animate-[fadeIn_0.8s_ease-out]">
            
            <div class="glass-panel rounded-3xl overflow-hidden shadow-2xl flex flex-col lg:flex-row min-h-[400px]">
                
                <!-- Left: Cinematic Thumbnail / Player Area -->
                <div class="lg:w-7/12 relative group h-56 lg:h-auto bg-black overflow-hidden flex flex-col justify-center">
                    
                    <!-- Interactive Preview Container -->
                    <div id="previewContainer" class="relative w-full h-full group cursor-pointer" onclick="loadVideoPreview()">
                        <img id="thumb" src="" alt="Thumbnail" class="w-full h-full object-cover opacity-90 transition-transform duration-700 group-hover:scale-105 group-hover:opacity-60">
                        <div class="absolute inset-0 bg-gradient-to-t from-black/90 via-transparent to-transparent pointer-events-none"></div>
                        
                        <!-- Play Button Overlay -->
                        <div id="playOverlay" class="absolute inset-0 flex items-center justify-center transition-transform duration-300 group-hover:scale-110">
                            <div class="w-20 h-20 bg-red-600/90 hover:bg-red-600 backdrop-blur-sm rounded-full flex items-center justify-center shadow-[0_0_40px_rgba(220,38,38,0.6)] pl-1">
                                <i class="fas fa-play text-3xl text-white"></i>
                            </div>
                        </div>

                        <!-- Info Overlay (Hidden when playing) -->
                        <div id="thumbInfo" class="absolute bottom-0 left-0 p-8 w-full pointer-events-none">
                            <span id="durationBadge" class="bg-red-600/90 backdrop-blur text-white px-3 py-1 rounded-md text-sm font-bold mb-4 inline-block shadow-lg">00:00</span>
                            <h2 id="videoTitle" class="text-2xl md:text-3xl font-bold text-white mb-2 leading-tight drop-shadow-md line-clamp-2"></h2>
                            <p id="channelName" class="text-base md:text-lg text-slate-300 font-medium flex items-center gap-2">
                                <i class="fab fa-youtube text-red-500"></i> <span id="uploader">Unknown Channel</span>
                            </p>
                        </div>
                    </div>

                    <!-- Iframe Container (Initially Empty) -->
                    <div id="videoPlayer" class="absolute inset-0 hidden bg-black z-20">
                        <!-- Iframe injected here -->
                    </div>
                </div>

                <!-- Right: Control Center -->
                <div class="lg:w-5/12 p-4 md:p-6 flex flex-col bg-slate-900/40 backdrop-blur-md border-l border-white/5">
                    
                    <!-- Format Tabs -->
                    <div class="flex p-1 bg-black/40 rounded-xl mb-4">
                        <button onclick="switchTab('video')" id="tabVideo" class="flex-1 py-2 rounded-lg text-sm font-bold transition-all duration-300">Video</button>
                        <button onclick="switchTab('audio')" id="tabAudio" class="flex-1 py-2 rounded-lg text-sm font-bold transition-all duration-300 text-slate-400 hover:text-white">Audio</button>
                    </div>

                    <!-- List Header -->
                    <div class="flex justify-between text-xs text-slate-400 uppercase tracking-wider mb-2 px-2">
                        <span>Quality</span>
                    </div>

                    <!-- Scrollable List -->
                    <div class="flex-1 overflow-y-auto custom-scrollbar pr-2 space-y-2 mb-4 max-h-[220px]" id="formatList">
                        <!-- Items injected via JS -->
                    </div>

                    <!-- Action Area -->
                    <div class="mt-auto">
                        <button id="downloadBtn" onclick="startDownload()" disabled
                            class="w-full relative overflow-hidden group bg-emerald-600 hover:bg-emerald-500 disabled:bg-slate-700 disabled:cursor-not-allowed text-white font-bold py-4 rounded-xl shadow-lg transition-all transform active:scale-[0.99]">
                            <span class="relative z-10 flex items-center justify-center gap-3 text-lg">
                                <i class="fas fa-bolt"></i>
                                <span>Initialize Download</span>
                            </span>
                            <div class="absolute inset-0 h-full w-full bg-gradient-to-r from-transparent via-white/20 to-transparent -translate-x-full group-hover:animate-[shimmer_1.5s_infinite]"></div>
                        </button>

                        <!-- Status Module -->
                        <div id="statusArea" class="hidden mt-4 bg-black/30 rounded-lg p-4 border border-white/5">
                            <div class="flex justify-between items-center mb-2">
                                <span id="statusText" class="text-sm font-mono text-emerald-400">Processing...</span>
                                <i class="fas fa-server text-slate-500 animate-pulse"></i>
                            </div>
                            <div class="w-full bg-slate-800 rounded-full h-1.5 overflow-hidden">
                                <div id="progressBar" class="bg-gradient-to-r from-emerald-500 to-cyan-500 h-full w-full animate-[shimmer_2s_infinite_linear]" 
                                     style="background-size: 200% 100%;">
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

    </div>
    <script src="/static/script.js"></script>
</body>
</html>